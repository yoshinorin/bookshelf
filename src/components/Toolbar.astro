---
import { config } from '../config';
---

<header class="toolbar">
  <a href="/" class="toolbar-brand">{config.site.name}</a>
  <nav class="toolbar-menu">
    <button class="menu-button" id="menu-toggle" aria-expanded="false" aria-haspopup="true">
      {config.ui.menuButton}
      <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
        <path d="M7 10l5 5 5-5z"/>
      </svg>
    </button>
    <div class="menu-dropdown" id="menu-dropdown">
      {config.menu.map((item) => (
        <a
          href={item.href}
          target={item.external ? '_blank' : undefined}
          rel={item.external ? 'noopener' : undefined}
        >
          {item.label}
        </a>
      ))}
    </div>
  </nav>
</header>
<div class="toolbar-divider"></div>

<script>
  const menuToggle = document.getElementById('menu-toggle');
  const menuDropdown = document.getElementById('menu-dropdown');

  menuToggle?.addEventListener('click', () => {
    const isOpen = menuDropdown?.classList.toggle('open');
    menuToggle.setAttribute('aria-expanded', String(isOpen));
  });

  document.addEventListener('click', (e) => {
    if (!menuToggle?.contains(e.target as Node) && !menuDropdown?.contains(e.target as Node)) {
      menuDropdown?.classList.remove('open');
      menuToggle?.setAttribute('aria-expanded', 'false');
    }
  });
</script>
